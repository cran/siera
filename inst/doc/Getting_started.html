<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Getting Started</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(siera)</span></code></pre></div>
<p>We will use the following example to get started:</p>
<p>A modified <em>CDISC Common Safety Displays</em> ARS metadata (xlsx
format, with example dynamic AnalysisMethodCodeTemplate R code handling
operations, based on functions from the <code>cards</code> package)</p>
<p>In order to facilitate the example, <em>siera</em> includes several
example files, which we use throughout the documentation. These include
several ARS files (json and xlsx), as well as csv-format ADaMs which can
be run with the R scripts produced by readARS function. Use the helper
ARS_example() with no arguments to list them or call it with an example
filename to get the path.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># To see a list of example files:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">ARS_example</span>()</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;ADAE.csv&quot;                          &quot;ADSL.csv&quot;                         </span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;ADVS.csv&quot;                          &quot;ADZSDER.csv&quot;                      </span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;Common_Safety_Displays_cards.xlsx&quot; &quot;cards_constructs.xlsx&quot;            </span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;exampleARS_1.json&quot;                 &quot;exampleARS_1a.json&quot;               </span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;exampleARS_2.json&quot;                 &quot;exampleARS_2.xlsx&quot;                </span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; [11] &quot;exampleARS_2a.xlsx&quot;                &quot;exampleARS_3.json&quot;                </span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; [13] &quot;test_cards.json&quot;</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co"># A temporary path to a specific file:</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="fu">ARS_example</span>(<span class="st">&quot;exampleARS_1.json&quot;</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; [1] &quot;C:/Users/mbosm/AppData/Local/Temp/RtmpOGuy4t/Rinsta79868865c7c/siera/extdata/exampleARS_1.json&quot;</span></span></code></pre></div>
<div id="reading-in-ars-metadata---what-to-expect" class="section level3">
<h3>Reading in ARS metadata - what to expect</h3>
<p>The ARS metadata contains all ARS information for the Reporting
Event. This information includes:</p>
<ul>
<li><em>mainListOfContents</em> (links outputs to their respective
analyses)</li>
<li><em>otherListsOfContents</em> (contains Output metadata)</li>
<li><em>dataSubsets</em> (filters data for individual analyses)</li>
<li><em>analysisSets</em> (filters data to get the Population Set for
the Output)</li>
<li><em>analysisGroupings</em> (groups data according to analysis
specifications)</li>
<li><em>analyses</em> (contains linking information to all components
required for calculation of results)</li>
<li><em>methods</em> (describes operations to be performed on data to
get results)</li>
</ul>
</div>
<div id="example" class="section level3">
<h3>Example</h3>
<p>The <em>readARS</em> function reads in a completed ARS metadata file,
and generates R scripts for each Output defined in the file. Below is an
example of how this can be done using a ready-to-use ARS metadata Excel
file (note that this is meant as an example. Official ARS metadata is in
json format, which can also be passed to the <em>readARS</em>
function):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Path to the Excel ARS metadata file: </span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>ARS_path <span class="ot">&lt;-</span> <span class="fu">ARS_example</span>(<span class="st">&quot;Common_Safety_Displays_cards.xlsx&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co"># Path to a folder which will contain the Output meta-programmed R scripts (recommended to update</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co"># to a more suitable local path)</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>output_folder <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co"># Path to the folder containing ADaM datasets in csv format (we will use temporary </span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co"># directory tempdir() to make the code run in this vignette, but it&#39;s recommended to </span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co"># 1. download the ADaMs required (csv ADSL and ADAE available using e.g. ARS_example(&quot;ADSL.csv&quot;))</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="co"># 2. store it in a folder (the directly downloaded location can be found using dirname(ARS_example(&quot;ADSL.csv&quot;)), for example.  Use this location, or manually store the ADaM somewhere else)</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co"># 3. use the folder path instead of tempdir() below.</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>ADaM_folder <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="co"># run the readARS function with these 3 parameters.  This creates R scripts </span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co"># (1 for each Output in output_folder)</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="fu">readARS</span>(ARS_path, output_folder, ADaM_folder)</span></code></pre></div>
<p>You should now have 5 R scripts (named ARD_Out14-1-1.R,
ARD_Out14-3-1-1.R, ARD_Out14-3-2-1.R, ARD_Out14-3-3-1a.R, and
ARD_Out14-3-3-1b.R) in the folder specified as <em>output_folder</em>.
You can execute any of these 5 R scripts as-is (assuming the ADaM
required for this script is available in the <em>ADaM_folder</em>), and
the result will be an ARD (one result per row format) for each of the
scripts.</p>
<div id="running-a-auto-generated-ard-script" class="section level4">
<h4>Running a auto-generated ARD script</h4>
<p>The structure of the auto-generated ARD script is discussed the the
<a href="ARD_script_structure.html">ARD structure</a> vignette. Examples
of such an auto-generated ARD scripts are included in the package, and
can be used by using the <code>ARD_script_example</code> function.
Running this script will look like this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># Step 1: open ARD_xxx.R file</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co"># Step 2: Confirm the location of ADaM dataset(s) is correct in the code section &quot;Load ADaM&quot;.  </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># For the sake of simplicity, the only update made to the ARD_Out14-1-1.R script was to point to the ADaM folder to ARS_example(&quot;ADSL.csv&quot;)</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co"># Step 3: Run the code and enjoy automated analysis results generation. </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co"># Note: the ARD is contained in the object &quot;ARD&quot; (which contains the appended) mini-ARDs from all individual Analyses ARDs.</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>example_ARD_script <span class="ot">=</span> <span class="fu">ARD_script_example</span>(<span class="st">&quot;ARD_Out14-1-1.R&quot;</span>)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="fu">source</span>(example_ARD_script)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">head</span>(ARD)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt;   group1 group1_level group2 group2_level variable variable_level stat_name</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 1   &lt;NA&gt;                &lt;NA&gt;                TRT01A        Placebo         n</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 2   &lt;NA&gt;                &lt;NA&gt;                TRT01A      Xanomeli…         n</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 3   &lt;NA&gt;                &lt;NA&gt;                TRT01A      Xanomeli…         n</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 4 TRT01A      Placebo   &lt;NA&gt;                   AGE                        N</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; 5 TRT01A      Placebo   &lt;NA&gt;                   AGE                     mean</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 6 TRT01A      Placebo   &lt;NA&gt;                   AGE                       sd</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt;   stat_label   stat</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt; 1          n     86</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; 2          n     84</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt; 3          n     84</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt; 4          N     86</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; 5       Mean 75.209</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt; 6         SD   8.59</span></span></code></pre></div>
<p>The <code>ARD</code> object is the result of appending all
analysis-level ARD (created from the <code>cards</code> and
<code>cardx</code> functions) for the output. It can be used (and
re-used) downstream for various applications. See <a href="apply-ARD.html">this vignette</a> for next step in utilising the
ARD - like creating Tables, or using it for QC.</p>
</div>
</div>
<div id="a-note-on-example-code-used-in-analysismethodcodetemplate-using-cards-package" class="section level3">
<h3>A note on example code used in AnalysisMethodCodeTemplate: using
<code>cards</code> package</h3>
<p>A powerful aspect of the ARS model, is that dynamic code can be
supplied as part of the metadata and be evaluated on either 1. the
Output level, 2. the Analysis level, or 3. the AnalysisMethod level (for
more information on this, see <a href="https://www.lexjansen.com/phuse-us/2025/ds/PAP_DS09.pdf">this</a>
PHUSE paper). The latter case is implemented by making use of the
<em>AnalysisMethodCodeTemplate</em> and
<em>AnalysisMethodCodeParameters</em> classes in the metadata. The user
supplies dynamic R code (with the option of making use of parameters
referring to metadata pieces), which will be executed to perform the
relevant AnalysisMethod operations. As was the case in this example, the
<code>cards</code> and <code>cardx</code> R packages were used. See more
information on this in the vignette on <a href="using-cards.html">using
<code>cards</code> and <code>cardx</code></a>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
